## ğŸ§© é¡µé¢ä¸€ï¼šç™»å½•ç•Œé¢ï¼ˆ/loginï¼‰

**åŠŸèƒ½æè¿°ï¼š** ç”¨æˆ·è¾“å…¥é‚®ç®±æˆ–è€…ç”¨æˆ·åæ¥æ­é…å¯†ç è¿›è¡Œç™»å½•

**éœ€è¦è°ƒç”¨çš„ APIï¼š**

#### **ç”¨æˆ·ç™»å½• ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`

- è·¯å¾„ï¼š`/api/users/login`

- è¯·æ±‚å‚æ•°ï¼š

  - 

  - | **å‚æ•°å**                                | **ç±»å‹** | **æ˜¯å¦å¿…å¡«** | **ç¤ºä¾‹å€¼**         | **è¯´æ˜**         |
    | ----------------------------------------- | -------- | ------------ | ------------------ | ---------------- |
    | useAccount ï¼ˆå¯ä»¥æ˜¯ username æˆ–è€… emailï¼‰ | String   | æ˜¯           | adminæˆ–xxx@163.com | ç”¨æˆ·å æˆ–è€… é‚®ç®± |
    | password                                  | String   | æ˜¯           | 12345678           | å¯†ç ï¼ˆæ˜æ–‡ï¼‰     |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "data": {
    "user_id": 1,
    "username": "user1",
    "email": "user1@163.com",
    "avatar_url": "",
    "role": "user",
    "created_at": "2025-04-11T17:56:26.000+00:00",
    "updated_at": "2025-04-13T15:50:45.000+00:00"
  },
  "message": "ok"
}
```

 å¤±è´¥ï¼ˆä¾‹å¦‚è´¦å·æˆ–å¯†ç é”™è¯¯ï¼‰ï¼š

 ä¸èƒ½æ˜ç¡®æŒ‡å‡ºæ˜¯è´¦å·å‡ºé”™äº†è¿˜æ˜¯å¯†ç å‡ºé”™äº†ï¼Œä¸ç„¶å¯èƒ½å­˜åœ¨å®‰å…¨é—®é¢˜

```json
{
  "code": 400,
  "data": null,
  "message": "Incorrect input of account/email or password"
}
```

**æ³¨æ„äº‹é¡¹**

- å¯†ç å­—æ®µï¼ˆ`password`ï¼‰ä¸ä¼šåœ¨è¿”å›ç»“æœä¸­æä¾›ï¼Œä¿è¯ä¿¡æ¯å®‰å…¨ã€‚

#### **è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`GET`
- è·¯å¾„ï¼š`/api/users/me`

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "data": {
    "user_id": 1,
    "username": "user1",
    "email": "user1@163.com",
    "avatar_url": "http://sulthbbxs.hd-bkt.clouddn.com/avatars/users/default.jpg",
    "role": "user",
    "created_at": "2025-04-11T17:56:26.000+00:00",
    "updated_at": "2025-04-13T15:50:45.000+00:00"
  },
  "message": "ok"
}
```

 å¤±è´¥ï¼ˆï¼‰ï¼š

```json
{
  "code": 400,
  "msg": "Access denied",
  "data": null
}
```

**æ³¨æ„äº‹é¡¹**

- å¿…é¡»åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦æ­£ç¡®æ ¼å¼çš„ Tokenï¼ˆ`Authorization: Bearer <token>`ï¼‰ï¼Œå¦åˆ™æœåŠ¡å™¨è¿”å› 401 é”™è¯¯ã€‚
- è¿”å›çš„ç”¨æˆ·ä¿¡æ¯åŒ…æ‹¬ idã€usernameã€role å’Œ tokenã€‚
- å½“å‰æ¥å£é€šå¸¸åœ¨å‰ç«¯é¡µé¢åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼Œç”¨äºåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ä»¥åŠç¡®è®¤èº«ä»½å’Œæƒé™ä¿¡æ¯ã€‚
- å¦‚æœ Token æ— æ•ˆæˆ–å·²è¿‡æœŸï¼Œå‰ç«¯åº”å¼•å¯¼ç”¨æˆ·é‡æ–°ç™»å½•ã€‚

## ğŸ§© é¡µé¢äºŒï¼šæ³¨å†Œç•Œé¢ï¼ˆ/registerï¼‰

**åŠŸèƒ½æè¿°ï¼š** æ–°ç”¨æˆ·è¾“å…¥é‚®ç®±ã€å¯†ç ã€å­¦å·ç­‰è¿›è¡Œæ³¨å†Œï¼Œåç«¯ä¿å­˜è´¦å·å¹¶å‘é€æ¿€æ´»é‚®ä»¶ã€‚

**éœ€è¦è°ƒç”¨çš„ APIï¼š**

#### **ç”¨æˆ·æ³¨å†Œ ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`
- è·¯å¾„ï¼š`/api/users/register`
- è¯·æ±‚å‚æ•°ï¼š

| **å‚æ•°å** | **ç±»å‹**     | **å¿…å¡«** | **ç¤ºä¾‹**                                                     | **è¯´æ˜**                                   |
| ---------- | ------------ | -------- | ------------------------------------------------------------ | ------------------------------------------ |
| username   | String       | æ˜¯       | san.zhang                                                    | ç”¨æˆ·å                                     |
| email      | String       | æ˜¯       | [san.zhang22@student.xjtlu.edu.cn](mailto:san.zhang22@student.xjtlu.edu.cn) | ç”¨æˆ·æ³¨å†Œæ—¶æ‰€æä¾›çš„é‚®ç®±                     |
| password   | String       | æ˜¯       | 12345678                                                     | å¯†ç ï¼ˆæ˜æ–‡ï¼‰ï¼›é•¿åº¦ä¸å°‘äº8ä½                |
| code       | String       | æ˜¯       | 123456                                                       | ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç                            |
| role       | String       | æ˜¯       | admin æˆ– user                                                | è§’è‰²ç±»å‹ï¼ˆåŒºåˆ†ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·ï¼‰           |
| file       | MultpartFile | å¦       | -                                                            | å¯å¡«å¯ä¸å¡«ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œå°±æ˜¯é»˜è®¤å¤´åƒ |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "data": {
    "user_id": 4,
    "username": "user",
    "email": "hjh814315762@163.com",
    "avatar_url": null,
    "role": "user",
    "created_at": "2025-04-17T23:37:28",
    "updated_at": "2025-04-17T23:37:28"
  },
  "message": "ok"
}
```

 å¤±è´¥ï¼š

```json
{
  "code": 400,
  "data": null,
  "message": "The username has been registered."
}
```

**æ³¨æ„äº‹é¡¹**

- åœ¨æ³¨å†Œä¹‹å‰ï¼Œåç«¯å¿…é¡»æ ¡éªŒé‚®ç®±æ˜¯å¦å·²å­˜åœ¨ï¼Œé˜²æ­¢æ•°æ®åº“å› å”¯ä¸€çº¦æŸå†²çªè€Œå‡ºé”™ã€‚

#### **é‚®ç®±éªŒè¯ï¼ˆæˆ‘ç›´æ¥åœ¨æ³¨å†Œè¯·æ±‚çš„æ—¶å€™åœ¨åç«¯å¯¹è¿™éƒ¨åˆ†å®ç°äº†ï¼‰**

- æ–¹æ³•ï¼š`POST`

- è·¯å¾„ï¼š`/api/users/``verify-email`

- è¯·æ±‚å‚æ•°ï¼š

  - | **å‚æ•°å** | **ç±»å‹** | **å¿…å¡«** | **ç¤ºä¾‹å€¼**                                                   | **è¯´æ˜**                                         |
    | ---------- | -------- | -------- | ------------------------------------------------------------ | ------------------------------------------------ |
    | email      | String   | æ˜¯       | [san.zhang22@student.xjtlu.edu.cn](mailto:san.zhang22@student.xjtlu.edu.cn) | ç”¨æˆ·å¡«å†™çš„é‚®ç®±åœ°å€ï¼Œéœ€è¦éªŒè¯æ ¼å¼å¹¶æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œ |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "msg": "Success",
  "data": null
}
```

 å¤±è´¥ï¼š

```json
{
  "code": 5009,
  "msg": "Email already registered",
  "data": null
}
```

**æ³¨æ„äº‹é¡¹**

- éªŒè¯æˆåŠŸåï¼Œåº”å°†å¯¹åº”ç”¨æˆ·çš„è´¦æˆ·çŠ¶æ€è®¾ç½®ä¸ºå·²æ¿€æ´»ã€‚
- éªŒè¯å¤±è´¥æ—¶ï¼Œå‰ç«¯åº”æç¤ºç”¨æˆ·é‡æ–°æ³¨å†Œã€‚
- éªŒè¯å®Œæˆåï¼Œå‰ç«¯å¯è·³è½¬åˆ°ç™»å½•é¡µï¼Œæç¤ºâ€œæ¿€æ´»æˆåŠŸï¼Œè¯·ç™»å½•â€ã€‚

## ğŸ§© é¡µé¢ä¸‰ï¼šæ‰¾å›å¯†ç ç•Œé¢ï¼ˆ/reset-passwordï¼‰

**åŠŸèƒ½æè¿°ï¼š** ç”¨æˆ·å¿˜è®°å¯†ç æ—¶ï¼Œå¯ä»¥é€šè¿‡é‚®ç®±è¯·æ±‚éªŒè¯ç ï¼ŒéªŒè¯éªŒè¯ç åè®¾ç½®æ–°å¯†ç ã€‚

**éœ€è¦è°ƒç”¨çš„ APIï¼š**

#### å‘é€éªŒè¯ç  ï¼ˆå·²å®Œæˆï¼‰

- æ–¹æ³•ï¼š`GET`

- è·¯å¾„ï¼š`/api/users/ask_code`

- è¯·æ±‚å‚æ•°ï¼š

  - | **å‚æ•°å** | **ç±»å‹** | **å¿…å¡«** | **ç¤ºä¾‹å€¼**                                                   | **è¯´æ˜**                                         |
    | ---------- | -------- | -------- | ------------------------------------------------------------ | ------------------------------------------------ |
    | email      | String   | æ˜¯       | [san.zhang22@student.xjtlu.edu.cn](mailto:san.zhang22@student.xjtlu.edu.cn) | ç”¨æˆ·å¡«å†™çš„é‚®ç®±åœ°å€ï¼Œéœ€è¦éªŒè¯æ ¼å¼å¹¶æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œ |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "data": {
    "user_id": 2,
    "username": "test_admin",
    "email": "admin@teacher.xjtlu.edu.cn",
    "avatar_url": "/avatars/default.jpg",
    "role": "admin",
    "created_at": "2025-04-16T17:36:04",
    "updated_at": "2025-04-17T19:10:11"
  },
  "message": "ok"
}
```

 å¤±è´¥ï¼š

```json
{
  "code": 400,
  "data": null,
  "message": "username/email or password is incorrect"
}
```

**æ³¨æ„äº‹é¡¹**

- åç«¯åº”éªŒè¯ä¼ å…¥çš„é‚®ç®±æ ¼å¼æ˜¯å¦åˆæ³•ï¼Œé˜²æ­¢éæ³•å‚æ•°ã€‚
- åç«¯åœ¨å‘é€é‚®ä»¶å‰éœ€è¦æ£€æŸ¥é‚®ç®±æ˜¯å¦å­˜åœ¨äºç³»ç»Ÿä¸­ã€‚
- å¦‚æœé‚®ç®±æœªæ³¨å†Œï¼Œå¯ä»¥ç»Ÿä¸€è¿”å›æç¤ºä¿¡æ¯ï¼Œé¿å…æš´éœ²ç³»ç»Ÿä¸­å·²æ³¨å†Œçš„ç”¨æˆ·ä¿¡æ¯ï¼ˆé˜²æ­¢è¢«æ¶æ„æ¢æµ‹ï¼‰ã€‚
- å‘é€çš„é‚®ä»¶åº”åŒ…å«ä¸€ä¸ªæœ‰æ—¶æ•ˆæ€§çš„éªŒè¯ç ã€‚

#### **é‡ç½®å¯†ç  ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`

- è·¯å¾„ï¼š`/api/users/reset-password`

- è¯·æ±‚å‚æ•°ï¼š

  - | **å‚æ•°å**  | **ç±»å‹** | **å¿…å¡«** | **ç¤ºä¾‹å€¼**     | **è¯´æ˜**                           |
    | ----------- | -------- | -------- | -------------- | ---------------------------------- |
    | code        | String   | æ˜¯       | 114514         | éªŒè¯ç ï¼ˆé€šå¸¸æ˜¯å‘é€åˆ°é‚®ç®±çš„éªŒè¯ç ï¼‰ |
    | newPassword | String   | æ˜¯       | newpassword123 | æ–°å¯†ç ï¼ˆç”¨æˆ·å¸Œæœ›é‡ç½®çš„æ–°å¯†ç ï¼‰     |
    | email       | String   | æ˜¯       | admin@163.com  | ä¿®æ”¹å¯†ç ç”¨æˆ·ç”¨æ¥æ¥å—éªŒè¯ç çš„é‚®ç®±   |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "msg": "Password Reset Success",
  "data": null
}
```

 å¤±è´¥ï¼ˆä¾‹å¦‚ token æ— æ•ˆæˆ–å·²è¿‡æœŸï¼‰ï¼š

```json
{
  "code": 501,
  "msg": "Failed to change the password",
  "data": null
}
```

**æ³¨æ„äº‹é¡¹**

- å‰ç«¯é¡µé¢éœ€è¦æ ¡éªŒæ–°å¯†ç çš„è¾“å…¥è§„åˆ™ï¼ˆä¾‹å¦‚é•¿åº¦ä¸å°‘äº6ä½ï¼ŒåŒ…å«å­—æ¯æ•°å­—ç­‰ï¼‰ã€‚
- åç«¯æ”¶åˆ°è¯·æ±‚åï¼Œåº”éªŒè¯éªŒè¯ç çš„æœ‰æ•ˆæ€§ï¼ˆæ˜¯å¦æ­£ç¡®å’Œæ˜¯å¦è¿‡æœŸï¼‰
- é‡ç½®å¯†ç åï¼Œæ—§çš„éªŒè¯ç åº”ç«‹å³å¤±æ•ˆï¼Œé˜²æ­¢è¢«é‡å¤ä½¿ç”¨ã€‚
- é‡ç½®æˆåŠŸåï¼Œåº”æç¤ºç”¨æˆ·ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•ã€‚
- æ–°å¯†ç ä¸èƒ½å’Œæ—§å¯†ç ä¸€è‡´

## ğŸ§© é¡µé¢å››ï¼šç”¨æˆ·ä¸ªäººä¸»é¡µï¼ˆ/profileï¼‰

**åŠŸèƒ½æè¿°ï¼š** ç”¨æˆ·æŸ¥çœ‹å’Œç¼–è¾‘è‡ªå·±çš„ä¸ªäººä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€å¤´åƒã€å¯†ç ç­‰è®¾ç½®ã€‚ä¸ºäº†ç®€æ´ï¼Œæ‰€æœ‰æ“ä½œé›†ä¸­åœ¨ä¸€ä¸ªé¡µé¢ï¼Œä¸å†å•ç‹¬æ‹†åˆ†â€œè®¾ç½®â€é¡µã€‚åœ¨è¿™é‡Œéœ€è¦é‰´å®šæ‰§è¡Œè¿™äº›æ“ä½œçš„è¯·æ±‚æ˜¯ä¸æ˜¯æ¥è‡ªç”¨æˆ·æœ¬èº«ï¼Œå¯ä»¥é€šè¿‡sessionæ¥é‰´å®šã€‚

**éœ€è¦è°ƒç”¨çš„ APIï¼š**

#### **è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`GET`
- è·¯å¾„ï¼š`/api/users/me`
- è¯·æ±‚å¤´ï¼šAuthorization

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "msg": "Success",
  "data": {
    "id": 2251668,
    "username": "san.zhang",
    "email": "san.zhang22@student.xjtlu.edu.cn",
    "role": "USER",
    "avatarUrl": "https://yourapp-avatar.qiniu.com/default-avatar.jpg"
  }
}
```

 å¤±è´¥ï¼š

```json
{
  "code": 400,
  "msg": "No user has been found",
  "data": null
}
```

**æ³¨æ„äº‹é¡¹**

- è¿”å›çš„ä¿¡æ¯åªåŒ…æ‹¬å½“å‰ç™»å½•ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¸åŒ…å«æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç ï¼‰ã€‚
- å¦‚æœè¯·æ±‚ä¸­çš„ user ä¸ºç©ºï¼Œåº”æç¤ºç”¨æˆ·é‡æ–°ç™»å½•ã€‚

#### **ä¿®æ”¹ç”¨æˆ·å ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`

- è·¯å¾„ï¼š`/api/users/change-``username`

- è¯·æ±‚å‚æ•°ï¼š

  - | **å‚æ•°å**  | **ç±»å‹** | **æ˜¯å¦å¿…å¡«** | **ç¤ºä¾‹**  | **è¯´æ˜**                                       |
    | ----------- | -------- | ------------ | --------- | ---------------------------------------------- |
    | oldUsername | String   | æ˜¯           | San.Zhang | ç”¨æˆ·æ›´æ”¹ä¹‹å‰çš„ç”¨æˆ·åï¼Œç”¨æ¥ä¼ å›åç«¯è¿›è¡Œèº«ä»½æ ¡éªŒ |
    | newUsername | String   | æ˜¯           | Li.Si     | æ–°çš„ç”¨æˆ·åï¼Œä¸èƒ½ä¸ºç©ºï¼Œä¸å¯ä¸ç°æœ‰ç”¨æˆ·åé‡å¤ã€‚   |

- è¯·æ±‚å¤´ï¼šAuthorization

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "data": {
    "user_id": 4,
    "username": "user1",
    "email": "gustavhuang@126.com",
    "avatar_url": "/avatars/4_1744909024664.jpg",
    "role": "user",
    "created_at": "2025-04-17T23:37:28",
    "updated_at": "2025-04-18T00:57:04"
  },
  "message": "ok"
}
```

 å¤±è´¥ï¼š

```JSON
{
  "code": 400,
  "data": null,
  "message": "You are not allowed to change the username"
}
```

**æ³¨æ„äº‹é¡¹**

- å‰ç«¯åç«¯éƒ½åº”è¯¥å¯¹äºå­—ç¬¦ä¸²è¿›è¡Œæ£€éªŒï¼Œå…·ä½“è§„åˆ™åé¢å†è®¨è®ºã€‚
- è¿”å›çš„ä¿¡æ¯åªåŒ…æ‹¬å½“å‰ç™»å½•ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¸åŒ…å«æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç ï¼‰ã€‚

#### **ä¿®æ”¹å¯†ç **ï¼ˆå’Œé‡ç½®å¯†ç æ˜¯ä¸€å¥—apiï¼‰ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`

- è·¯å¾„ï¼š`/api/users/reset-password`

- è¯·æ±‚å‚æ•°ï¼š

  - | **å‚æ•°å**  | **ç±»å‹** | **æ˜¯å¦å¿…å¡«** | **ç¤ºä¾‹å€¼**        | **è¯´æ˜**                           |
    | ----------- | -------- | ------------ | ----------------- | ---------------------------------- |
    | code        | String   | æ˜¯           | 114514            | éªŒè¯ç ï¼ˆé€šå¸¸æ˜¯å‘é€åˆ°é‚®ç®±çš„éªŒè¯ç ï¼‰ |
    | newPassword | String   | æ˜¯           | new_password_here | ç”¨æˆ·å¸Œæœ›è®¾ç½®çš„æ–°å¯†ç                |
    | email       | String   | æ˜¯           | xxx@qq.com63.com  | ä¿®æ”¹å¯†ç çš„ç”¨æˆ·çš„é‚®ç®±               |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "data": "Password Reset Success",
  "message": "ok"
}
```

 å¤±è´¥ï¼ˆä¾‹å¦‚åŸå¯†ç é”™è¯¯æˆ– token æ— æ•ˆï¼‰ï¼š

```json
{
  "code": 5011,
  "msg": "Original password incorrect",
  "data": null
}
```

**æ³¨æ„äº‹é¡¹**

- å‰ç«¯åç«¯éƒ½åº”è¯¥å¯¹å¯†ç è¿›è¡ŒåŸºæœ¬æ ¼å¼æ ¡éªŒï¼Œä¾‹å¦‚é•¿åº¦ï¼ˆä¸å°‘äº8ä½ï¼‰ã€å¤æ‚åº¦ï¼ˆå­—æ¯+æ•°å­—ï¼‰ï¼Œå…·ä½“è§„åˆ™åé¢å†è®¨è®ºã€‚
- ä¿®æ”¹å¯†ç æ—¶å¿…é¡»æä¾›æ­£ç¡®çš„åŸå¯†ç ï¼Œé˜²æ­¢éæ³•ç”¨æˆ·ç›´æ¥ä¿®æ”¹ã€‚
- åç«¯åœ¨å­˜å‚¨å¯†ç æ—¶å¿…é¡»è¿›è¡ŒåŠ å¯†ï¼ˆä¾‹å¦‚ä½¿ç”¨bcryptå“ˆå¸Œï¼‰ã€‚
- åªæœ‰å½“å‰ç™»å½•çš„ç”¨æˆ·æˆ–è€…ç®¡ç†å‘˜å¯ä»¥æ›´æ”¹å…¶å¯†ç ã€‚
- è¿”å›çš„ä¿¡æ¯ä¸­ä¸å¾—åŒ…å«ä»»ä½•æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç æ˜æ–‡æˆ–å“ˆå¸Œå€¼ï¼‰ã€‚

#### **ä¸Šä¼ å¤´åƒ ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`

- è·¯å¾„ï¼š`/api/qiniu/upload-avatar`

- è¯·æ±‚å‚æ•°ï¼šè¿™é‡Œè¦æ±‚çš„è¯·æ±‚å½¢å¼æ˜¯ formData

  - | **å‚æ•°å** | **ç±»å‹**           | **æ˜¯å¦å¿…å¡«** | **ç¤ºä¾‹**     | **è¯´æ˜**                                                    |
    | ---------- | ------------------ | ------------ | ------------ | ----------------------------------------------------------- |
    | file       | Fileï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ | æ˜¯           | å¤´åƒå›¾ç‰‡æ–‡ä»¶ | ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶ï¼Œæ ¼å¼æ”¯æŒ .jpgã€.pngã€jepgï¼Œå¤§å°é™åˆ¶ 2MBä»¥å†… |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "data": {
    "avatar_url": "http://sulthbbxs.hd-bkt.clouddn.com/avatars/4_1744909024664.jpg"
  },
  "message": "ok"
}
```

 å¤±è´¥ï¼ˆä¾‹å¦‚åŸå¯†ç é”™è¯¯æˆ– token æ— æ•ˆï¼‰ï¼š

```JSON
{
  "code": 400,
  "data": null,
  "message": "Wrong user id"
}
```

**æ³¨æ„äº‹é¡¹**

- å‰ç«¯ä¸Šä¼ å¤´åƒæ—¶ï¼Œåº”é™åˆ¶å›¾ç‰‡å¤§å°ä¸è¶…è¿‡2MBï¼Œæ ¼å¼ä»…é™"jpeg", "png", "jpg", "webp", "JPG", "WEBP", "PNG", "JPEG"ã€‚
- åç«¯åº”æ ¡éªŒä¸Šä¼ æ–‡ä»¶çš„ç±»å‹å’Œå¤§å°ï¼Œé˜²æ­¢æ¶æ„æ–‡ä»¶ä¸Šä¼ ã€‚
- ä¸Šä¼ æˆåŠŸåï¼Œè¿”å›å¤´åƒçš„å…¬ç½‘è®¿é—®URLï¼Œä¾›å‰ç«¯æ›´æ–°ç”¨æˆ·å¤´åƒå±•ç¤ºã€‚
- åªå…è®¸å½“å‰ç™»å½•ç”¨æˆ·ä¸Šä¼ è‡ªå·±çš„å¤´åƒï¼Œåç«¯å¿…é¡»æ ¡éªŒ `userId` ä¸è¯·æ±‚ä¸­ session çš„ç”¨æˆ·IDä¸€è‡´ã€‚

#### **ä¿®æ”¹é‚®ç®±** **ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`

- è·¯å¾„ï¼š`/api/users/change-email`

- è¯·æ±‚å‚æ•°ï¼š

  - | **å‚æ•°å** | **ç±»å‹** | **æ˜¯å¦å¿…å¡«** | **ç¤ºä¾‹**                                                     | **è¯´æ˜**                                           |
    | ---------- | -------- | ------------ | ------------------------------------------------------------ | -------------------------------------------------- |
    | oldEmail   | String   | æ˜¯           | oldEmail@student.xjtlu.edu.cn                                | ç”¨æˆ·åœ¨æ›´æ”¹ä¹‹å‰çš„é‚®ç®±åœ°å€ï¼Œéœ€è¦ä¼ å›åç«¯ç”¨æ¥èº«ä»½æ ¡éªŒ |
    | newEmail   | String   | æ˜¯           | si.li[22@student.xjtlu.edu.cn](mailto:san.zhang22@student.xjtlu.edu.cn) | ç”¨æˆ·å¡«å†™çš„é‚®ç®±åœ°å€ï¼Œéœ€è¦éªŒè¯æ ¼å¼å¹¶æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œ   |

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "msg": "Success",
  "data": null
```

 å¤±è´¥ï¼ˆä¾‹å¦‚åŸå¯†ç é”™è¯¯æˆ– token æ— æ•ˆï¼‰ï¼š

```JSON
{
  "code": 500,
  "msg": "Wrong email format",
  "data": null
```

**æ³¨æ„äº‹é¡¹**

- åç«¯åº”æ ¡éªŒæ–°é‚®ç®±åœ°å€çš„æ ¼å¼ï¼Œç¡®ä¿ç¬¦åˆæ ‡å‡†é‚®ç®±æ ¼å¼ã€‚
- åç«¯åº”æ£€æŸ¥æ–°é‚®ç®±åœ°å€æ˜¯å¦å·²ç»è¢«å…¶ä»–ç”¨æˆ·æ³¨å†Œï¼Œé¿å…é‡å¤æ³¨å†Œã€‚
- ä¿®æ”¹é‚®ç®±æ“ä½œéœ€è¦ç”¨æˆ·ä¿æŒç™»å½•çŠ¶æ€ã€‚
- åç«¯åº”è¯·æ±‚ï¼Œå¹¶è§£æå‡ºçš„ç”¨æˆ·æœªæ›´æ”¹ä¹‹å‰çš„é‚®ç®±ï¼Œç¡®ä¿æ˜¯å½“å‰ç”¨æˆ·æœ¬äººæˆ–è€…ç®¡ç†å‘˜åœ¨ä¿®æ”¹è‡ªå·±çš„é‚®ç®±ã€‚
- å¦‚æœç”¨æˆ·è¯·æ±‚ä¸­æ²¡æœ‰æºå¸¦ç™»å½•çŠ¶æ€çš„ session_idï¼Œåº”æç¤ºç”¨æˆ·é‡æ–°ç™»å½•ã€‚
- ä¿®æ”¹æˆåŠŸåï¼Œåº”æ›´æ–°æ•°æ®åº“ä¸­çš„ç”¨æˆ·é‚®ç®±å­—æ®µï¼Œå¹¶è¿”å›æˆåŠŸå“åº”ã€‚
- è‹¥é‚®ç®±æ ¼å¼é”™è¯¯ã€é‚®ç®±å·²å­˜åœ¨ï¼Œæˆ– Token æ— æ•ˆï¼Œåº”è¿”å›æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯æç¤ºå‰ç«¯å¤„ç†ã€‚

#### **æ³¨é”€è´¦æˆ· ï¼ˆå·²å®Œæˆï¼‰**

- æ–¹æ³•ï¼š`POST`
- è·¯å¾„ï¼š`/api/users/delete`

**è¿”å›ç¤ºä¾‹**

 æˆåŠŸï¼š

```json
{
  "code": 200,
  "msg": "Success",
  "data": null
}
```

 å¤±è´¥ï¼ˆä¾‹å¦‚åŸå¯†ç é”™è¯¯æˆ– token æ— æ•ˆï¼‰ï¼š

```json
{
  "code": 500,
  "msg": "Access denied",
  "data": null
}
```

**æ³¨æ„äº‹é¡¹**

- æ³¨é”€è´¦æˆ·æ“ä½œéœ€ç”¨æˆ·ç¡®è®¤ï¼ˆå»ºè®®å‰ç«¯å¼¹çª—äºŒæ¬¡ç¡®è®¤ï¼‰ã€‚
- åç«¯å¿…é¡»æ ¡éªŒå½“å‰ç™»å½•ç”¨æˆ·èº«ä»½ï¼Œåªå…è®¸æœ¬äººæ³¨é”€è‡ªå·±çš„è´¦æˆ·ã€‚
- æ³¨é”€åï¼Œç”¨æˆ·è´¦æˆ·çŠ¶æ€åº”å˜ä¸º "æ³¨é”€/ç¦ç”¨"ï¼Œæˆ–é€»è¾‘åˆ é™¤ï¼Œé¿å…ç›´æ¥ç‰©ç†åˆ é™¤æ•°æ®ã€‚

#### æ³¨é”€ç™»å½• ï¼ˆå·²å®Œæˆï¼‰

 æ–¹æ³•ï¼š`GET`

 è·¯å¾„ï¼š`/api/users/logout`

è¿”å›ç¤ºä¾‹:

æˆåŠŸï¼š

```JSON
{
  "code": 200,
  "msg": "Success",
  "data": null
}
```

å¤±è´¥ï¼š

```JSON
{
  "code": 500,
  "msg": "Access denied",
  "data": null
}
```

- ç”¨æˆ·éœ€è¦å½“å‰æ˜¯ç™»å½•çŠ¶æ€æ‰èƒ½ç”³è¯·æ³¨é”€ç™»å½•
- æ³¨é”€ç™»å½•ä¹‹åï¼Œéœ€è¦åˆ é™¤å­˜æ”¾åœ¨æœ¬åœ°ç¼“å­˜å½“ä¸­çš„éªŒè¯ç 